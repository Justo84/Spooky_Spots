<h1><%= @location.name %></h1>

<div>&nbsp;</div>

<div class="location">
<h4><%= @location.description %></h4>
</div>
<div>&nbsp;</div>
<h3>State: </h3>
<h5><%= @location.state %></h5>
<div>&nbsp;</div>
<h3>Town: </h3>
<h5><%= @location.town %></h5>
<div>&nbsp;</div>
<% if @location.street != nil %>
  <h3>Street: </h3>
  <h5><%= @location.street %> </h5>
  <div>&nbsp;</div>
<% end %>
<h3>Size: </h3>
<h5><%= @location.size %></h5>
<div>&nbsp;</div>
<h3>History: </h3>
<h5><%= @location.history %></h5>
<div>&nbsp;</div>
<h3>Private Land: </h3>
<h5><%= @location.private_land %></h5>
<div>&nbsp;</div>
<h3>In Use: </h3>
<h5><%= @location.in_use %></h5>
<div>&nbsp;</div>
<% if @location.endorsed == true %>
  <h3> Endorsed By Spooky Spots </h3>
<% end %>
<div>&nbsp;</div>

<% if @user.role == "admin" %>
    <% if @location.endorsed == false %>
    <%= form_for [:admin, @location] do |f| %>
      <%= f.hidden_field :endorsed, value: true %>
      <%= f.submit "Endorse Location", class: "button success" %>
    <% end %>
    <% elsif @location.endorsed == true %>
    <%= form_for [:admin, @location] do |f| %>
      <%= f.hidden_field :endorsed, value: false %>
      <%= f.submit "Un-Endorse Location", class: "button alert" %>
    <% end %>
  <% end %>
<% end %>

<div>&nbsp;</div>

<ul class="small-block-grid-3">
  <% @location.location_images.each do |location_image| %>
  <li><%= image_tag(location_image.image.url, alt: location_image.description) %></li>
  <%= location_image.description %>
  <% end %>
</ul>

<div>&nbsp;</div>

<div>Upload a photo of <%= @location.name %></div>-
<%= form_for [@location, @image] do |f| %>
  <div>
    <%= f.label :image, "Spooky Image" %>
    <%= f.file_field :image %>
  </div>
  <div>
    <%= f.label :description, "Spooky Description" %>
    <%= f.text_field :description %>
  </div>
  <%= f.hidden_field :location_id, value: @location.id %>
  <%= f.submit "Add photo", class: "button tiny" %>
<% end %>
</div>

<div>&nbsp;</div>

<a href="edit_location_path(@location)" class="button tiny">Edit</a>

<%= button_to "Delete Location",
location_path(@location),
method: :delete,
action: :destroy,
data: { confirm: "Are you sure you want to delete this review?" }, class: "button tiny"%>


<%= button_to "Review this Location", new_location_review_path(@location), class: "button tiny" %>

<div>&nbsp;</div>

<h4> REVIEWS: </h4>
<ul>
  <% @reviews.each do |review| %>
  <li>
    <div> <%= review.description %></div>
    <div> Spookiness: <%= review.spo_rating %></div>
    <div> Scenery: <%= review.sce_rating %></div>
    <div> Exploration: <%= review.exp_rating %></div>
    <div>&nbsp;</div>
    <% if @user && (@user == review.user || @user.role == "admin") %>
      <%= link_to "Edit this review", edit_location_review_path(@location, review) %>
      <%= button_to "Delete",
      location_review_path(@location, review),
      method: :delete,
      action: :destroy,
      data: { confirm: "Are you sure you want to delete this review?" }%>
    <% else %>
    <% end %>
  </li>
  <% end %>
</ul>
